<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Ponder - Magic: the Gathering Card Search</title>
	<link rel="stylesheet" href="themes/united.min.css" />
	<link rel="stylesheet" href="themes/jquery.mobile.icons.min.css" />
	<link rel="stylesheet" href="assets/jquery.mobile-1.4.5/jquery.mobile.structure-1.4.5.min.css" />
	<script src="assets/jquery-1.12.0.js"></script>
	<script src="assets/jquery.mobile-1.4.5/jquery.mobile-1.4.5.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    
    <script>
        $(document).ready(function(){
            $("#btnSearch").click(function(){
                var cardName = $("#txtSearch").val();
                getCardData(cardName);
                $.mobile.changePage('#results',{transition:"flip"});
            })
        })
        
        function getCardData(cardName){
            var serviceUrl = "https://api.deckbrew.com/mtg/cards?name=" + cardName;
            
            $.getJSON(serviceUrl, function(data){
                console.log(data);
                $.each(data,function(object,key){
                    console.log(key.name)
                    
                    $("ul").append("<li>Name: "+key.name+"</li><li>CMC: "+key.cmc+"</li><li>Type: "+key.types+"</li><li>Subtype: "+key.subtypes+"</li><li>Cost: "+key.cost+"</li><li><img src="+key.editions.image_url+"/></li><br />");
                })
                
                
                
                //$("#name").html("Name of card: " + data.name);
                
            });
        }
    </script>
</head>
<body>
    <section data-role="page" id="cardsearch">
        <div data-role="main" class="ui-content">
            <div data-role="header" class="logo">
                <h1>Ponder</h1>
            </div>
            <div id="description">
                <p>Enter card name to search for more information</p>
            </div>
            <div id="search">
                <input type="text" id="txtSearch" placeholder="Card Name" value="" />
                <input type="button" id="btnSearch" value="Search" />
            </div>
            <div data-role="footer">
                <h2>&copy; Micah Calamosca 2016</h2>
            </div>
        </div>
    </section>
    
    <div data-role="page" id="results" data-add-back-btn="true">
        <div data-role="header">
                <h1>Results</h1>
        </div>
        <div data-role="main" class="ui-content">
            <div>
                <ul></ul>
            </div>
        </div>
    </div>
</body>
</html>